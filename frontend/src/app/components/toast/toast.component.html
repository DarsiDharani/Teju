<!-- Centered Modal Popup (replaces side toasts) -->
<div *ngIf="toasts.length > 0" class="fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/70 backdrop-blur-md" (click)="closeCurrentToast()">
  <div 
    *ngFor="let toast of toasts; let i = index" 
    [@modalScale]
    class="bg-white rounded-3xl shadow-2xl max-w-lg w-full transform transition-all border-2"
    [ngClass]="getBorderClass(toast.type)"
    (click)="$event.stopPropagation()">
    
    <!-- Animated Header with Gradient -->
    <div class="rounded-t-3xl px-6 py-5" [ngClass]="getHeaderGradient(toast.type)">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <!-- Animated Icon Circle -->
          <div class="w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border-4 border-white/30 animate-pulse">
            <i [ngClass]="['fa-solid', getIconClass(toast.type)]" class="text-white text-2xl"></i>
          </div>
          <div>
            <h3 class="text-2xl font-bold text-white">{{ toast.title }}</h3>
            <p class="text-sm text-white/90 mt-0.5" *ngIf="toast.type === 'success'">Action completed successfully</p>
            <p class="text-sm text-white/90 mt-0.5" *ngIf="toast.type === 'error'">An error occurred</p>
            <p class="text-sm text-white/90 mt-0.5" *ngIf="toast.type === 'warning'">Please review this</p>
            <p class="text-sm text-white/90 mt-0.5" *ngIf="toast.type === 'info'">Information</p>
          </div>
        </div>
        <button 
          (click)="removeToast(toast.id)"
          class="w-8 h-8 rounded-full bg-white/20 hover:bg-white/30 backdrop-blur-sm flex items-center justify-center transition-all text-white hover:scale-110">
          <i class="fa-solid fa-times text-sm"></i>
        </button>
      </div>
    </div>
    
    <!-- Content Area -->
    <div class="p-6">
      <div class="bg-slate-50 rounded-xl p-4 border border-slate-200">
        <p class="text-slate-700 whitespace-pre-line leading-relaxed" [innerHTML]="formatMessage(toast.message)"></p>
      </div>
    </div>
    
    <!-- Action Button -->
    <div class="px-6 pb-6">
      <button 
        (click)="removeToast(toast.id)"
        class="w-full px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]"
        [ngClass]="getButtonClass(toast.type)">
        <i [ngClass]="['fa-solid', getButtonIcon(toast.type), 'mr-2']"></i>
        {{ getButtonText(toast.type) }}
      </button>
    </div>
  </div>
</div>
